@import ../mixins
@import ../vars.module

\:root
	--swiper-theme-color: #{$brand-color} !important
	--swiper-pagination-bullet-size: 0.6rem
	--swiper-pagination-bullet-inactive-color: #888
	--swiper-pagination-bullet-inactive-opacity: 0.3
	--swiper-pagination-bullet-opacity: 1
	--swiper-pagination-bullet-horizontal-gap: 0.3rem
	--swiper-pagination-bullet-vertical-gap: 1.5rem

.carousel-container
	+make-container
	width: 100%

.swiper
	height: 100%
	&.swiper-initialized
		.swiper-slide
			opacity: 1
.swiper-slide
	opacity: 0
	transition: opacity 600ms ease-out
	span
		max-height: 80vh
		margin: auto !important

	.swiper-zoom-container
		overflow: unset !important

	&-zoomed
		img
			object-fit: cover !important

	.carousel-caption
		position: absolute
		top: 0
		left: 0
		right: 0
		padding: 2vw
		transition: all 300ms ease
		user-select: none
		>*
			color: black
			text-align: center
		.subtitle
			margin: 0.5rem 0
		p
			display: table
			font-size: 0.9rem
			text-align: left
			+push--auto
		&.hide
			opacity: 0
			visibility: hidden
		&.show
			opacity: 1
			visibility: visible
			&:hover
				background-color: transparentize(white, 0.5)

	.player
		+push--absolute
		transition: opacity 0.3s ease-out, backdrop-filter 0.15s linear
		opacity: 0
		backdrop-filter: blur(0px)
		//pointer-events: none
		.progress
			position: absolute
			display: flex
			width: 100%
			height: $progressbar-h
			left: 0
			top: 0
			padding: 0 1px
			background-color: $progressbar-bg
			z-index: 1
			.loaded-bar, .played-bar
				height: 100%
				transition: width 1s linear
			.loaded-bar
				background-color: $progressbar-loaded-bg
			.played-bar
				background-color: $progressbar-played-bg

		.react-player
			position: relative
			line-height: 0

		&.loaded
			opacity: 1
			backdrop-filter: blur(10px)


.swiper-control
	&-prev,
	&-next
		position: absolute
		top: 50%
		width: auto !important
		padding: 0 !important
		transform: translateY(-50%)
		overflow: hidden
		z-index: 1
		&:focus-visible
			outline: none
		&.disabled
			display: none
	&-prev
		left: 0
	&-next
		right: 0

	+media-breakpoint-up(sm)
		&-prev
			left: calc(-#{$arrow-size} - #{$slider-controls-margin} + 1rem)

		&-next
			right: calc(-#{$arrow-size} - #{$slider-controls-margin} + 1rem)

	+media-breakpoint-up(md)
		&-prev
			left: calc(-#{$arrow-size} - #{$slider-controls-margin})

		&-next
			right: calc(-#{$arrow-size} - #{$slider-controls-margin})


.lightbox
	.swiper
		overflow: unset
		height: 100vh
	.swiper-wrapper
		align-items: center
	.swiper-slide
		//height: auto
		height: 100%
		padding: $lightbox-controls-margin

		span
			position: relative
			max-height: 100vh

	.carousel-caption
		padding: $lightbox-controls-margin

	.swiper-control
		&-prev,
		&-next
			background-color: transparentize($lightbox-controls-bg-color, 0.7)
			padding: 0
			transition: all 300ms ease-out
			//border: 1px solid black
			//@extend .rounded
			.arrow
				//@extend .rounded
				&::before, &::after
					background-color: $lightbox-controls-color
			&:hover
				background-color: $lightbox-controls-bg-color

		&-prev
			left: $lightbox-controls-margin

		&-next
			right: $lightbox-controls-margin

	.swiper-fraction
		position: fixed
		left: $lightbox-controls-margin
		top: $lightbox-controls-margin
		padding: 0.8rem
		color: $lightbox-controls-color
		background-color: transparentize($lightbox-controls-bg-color, 0.7)
		z-index: 1


.carousel-modal .btn-close
	position: fixed
	right: $lightbox-controls-margin
	top: $lightbox-controls-margin
	padding: 0.8rem
	z-index: 1
	&:hover
		transform: scale(1.2)
		background-color: transparentize($lightbox-controls-bg-color, 0.7)
